<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cesium Video on Terrain</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.130.1/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.130.1/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <style>
    html, body, #cesiumContainer {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
  </style>
</head>
<body>
<div id="cesiumContainer"></div>
<video id="video" src="drone.mp4" loop="true" autoplay="true" muted="true" crossorigin="anonymous" style="position: absolute; top: 0px; right: 0px; width: 300px; height: 200px;"></video>

<script type="module">
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlOWMwNjYyMS02MWE0LTRiNmItYTEwMy1kOGQ5OTNkNWQyYWQiLCJpZCI6MTQ1NTAsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NjU3ODA0MTl9.jVStXPdk1PpSGewonbPk3V2TXWVmb6Hom_ExapmzavM';

  // Initialize Cesium Viewer with terrain
  const viewer = new Cesium.Viewer("cesiumContainer", {
    terrainProvider: await Cesium.createWorldTerrainAsync()
  });

  viewer.camera.flyTo({
    destination: Cesium.Cartesian3.fromDegrees(-120.0, 35.0, 300000.0)
  });

  // Create video element
  const video = document.getElementById('video');
  // const video = document.createElement('video');
  // video.src = 'drone.mp4';       // path to your video
  // video.loop = true;
  // video.muted = true;            // required for autoplay
  // video.autoplay = true;
  // video.crossOrigin = 'anonymous';
  // video.play();

  // Add rectangle entity with video material
  viewer.entities.add({
    rectangle: {
      coordinates: Cesium.Rectangle.fromDegrees(-121.0, 34.0, -119.0, 36.0),
      material: new Cesium.ImageMaterialProperty({
        image: video,
        repeat: new Cesium.Cartesian2(1,1),
        transparent: true
      }),
      heightReference: Cesium.HeightReference.CLAMP_TO_GROUND
    }
  });

</script>
</body>
</html>
